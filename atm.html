<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ATM Ultimate</title>

<style>
body{margin:0;font-family:Arial;background:#050505;color:#00ffff;display:flex;justify-content:center;align-items:center;height:100vh;}
.atm{background:#111;padding:30px;border-radius:20px;box-shadow:0 0 30px #00ffff;text-align:center;width:360px;position:relative;}
.card{width:80px;height:50px;background:#00ffff;margin:auto;border-radius:8px;animation:insert 2s infinite alternate;}
@keyframes insert{from{transform:translateY(0)}to{transform:translateY(10px)}}
input{width:100%;padding:10px;margin:10px 0;border-radius:10px;border:none;text-align:center;font-size:18px;}
button{background:#00ffff;border:none;padding:10px 18px;margin:5px;border-radius:20px;cursor:pointer;}
.keypad button{width:70px;margin:4px;}
.menu{display:none;}
.history{max-height:100px;overflow:auto;background:#000;padding:10px;border-radius:10px;margin-top:10px;}
.receipt{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#000;padding:20px;border-radius:15px;box-shadow:0 0 20px #00ffff;width:260px;}
.fp{width:80px;height:80px;border-radius:50%;border:2px solid #00ffff;margin:auto;animation:pulse 2s infinite;}
@keyframes pulse{0%{box-shadow:0 0 10px #00ffff}50%{box-shadow:0 0 25px #00ffff}100%{box-shadow:0 0 10px #00ffff}}
</style>
</head>

<body>

<div class="atm">

<div class="card"></div>

<h3>ATM Login</h3>
<input type="password" id="pin" maxlength="4" placeholder="Enter PIN">

<div class="fp" onclick="fingerprint()"></div>
<p>Fingerprint Login</p>

<div class="keypad">
<button onclick="press(1)">1</button>
<button onclick="press(2)">2</button>
<button onclick="press(3)">3</button><br>
<button onclick="press(4)">4</button>
<button onclick="press(5)">5</button>
<button onclick="press(6)">6</button><br>
<button onclick="press(7)">7</button>
<button onclick="press(8)">8</button>
<button onclick="press(9)">9</button><br>
<button onclick="clearPin()">C</button>
<button onclick="press(0)">0</button>
<button onclick="login()">OK</button>
</div>

<div class="menu" id="menu">
<h3>ATM Menu</h3>
<p id="balance">Balance: ₹10000</p>

<button onclick="withdraw()">Withdraw</button>
<button onclick="deposit()">Deposit</button>
<button onclick="transfer()">Transfer</button>
<button onclick="changePin()">Change PIN</button>
<button onclick="showReceipt()">Receipt</button>
<button onclick="logout()">Logout</button>
<button onclick="closeATM()">Close</button>

<div class="history" id="history"></div>
</div>

<div class="receipt" id="receipt">
<h3>Transaction Receipt</h3>
<div id="receiptData"></div>
<button onclick="closeReceipt()">Close</button>
</div>

</div>

<script>
let bal=10000;
let history=[];
let tries=0;
let pin="1234";
let dailyLimit=5000;
let todayWithdraw=0;

// ⭐ keyboard support
document.addEventListener("keydown",function(e){
if(!isNaN(e.key) && document.getElementById("pin").value.length<4){
document.getElementById("pin").value+=e.key;
}
if(e.key==="Backspace") clearPin();
if(e.key==="Enter") login();
});

function beep(){alert("Beep");}

function press(num){
beep();
if(document.getElementById("pin").value.length<4){
document.getElementById("pin").value+=num;
}
}

function clearPin(){document.getElementById("pin").value="";}

function fingerprint(){
alert("Fingerprint success");
document.getElementById("menu").style.display="block";
}

function login(){
if(document.getElementById("pin").value===pin){
document.getElementById("menu").style.display="block";
tries=0;
}else{
tries++;
alert("Wrong PIN");
if(tries>=3) alert("Card Blocked!");
}
}

function withdraw(){
let amt=parseInt(prompt("Enter withdraw amount"));
if(amt>0 && bal>=amt && todayWithdraw+amt<=dailyLimit){
bal-=amt;
todayWithdraw+=amt;
history.push("Withdraw ₹"+amt);
update();
}else alert("Limit reached / Low balance");
}

function deposit(){
let amt=parseInt(prompt("Enter deposit amount"));
if(amt>0){bal+=amt;history.push("Deposit ₹"+amt);update();}
else alert("Invalid amount");
}

function transfer(){
let amt=parseInt(prompt("Enter transfer amount"));
if(amt>0 && bal>=amt){bal-=amt;history.push("Transfer ₹"+amt);update();}
else alert("Invalid amount");
}

function changePin(){
let newPin=prompt("Enter new 4 digit PIN");
if(newPin.length==4){pin=newPin;alert("PIN changed");}
else alert("Invalid PIN");
}

function update(){
document.getElementById("balance").innerText="Balance: ₹"+bal;
document.getElementById("history").innerHTML=history.join("<br>");
}

function showReceipt(){
document.getElementById("receipt").style.display="block";
let data="<b>Balance: ₹"+bal+"</b><br><br>";
data+=history.length?history.join("<br>"):"No Transactions";
document.getElementById("receiptData").innerHTML=data;
}

function closeReceipt(){document.getElementById("receipt").style.display="none";}

function logout(){
document.getElementById("menu").style.display="none";
document.getElementById("pin").value="";
}

function closeATM(){window.history.back();}
</script>

</body>
</html>