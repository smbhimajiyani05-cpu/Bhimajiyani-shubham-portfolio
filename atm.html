<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ATM Simulation</title>

<style>
body{margin:0;font-family:Arial;background:#050505;color:#00ffff;display:flex;justify-content:center;align-items:center;height:100vh;}
.atm{background:#111;padding:30px;border-radius:20px;box-shadow:0 0 35px #00ffff;text-align:center;width:380px;position:relative;}
.card{width:90px;height:55px;background:#00ffff;margin:auto;border-radius:8px;animation:insert 2s infinite alternate;}
@keyframes insert{from{transform:translateY(0)}to{transform:translateY(12px)}}
input{width:100%;padding:10px;margin:10px 0;border-radius:10px;border:none;text-align:center;font-size:18px;}
button{background:#00ffff;border:none;padding:10px 18px;margin:5px;border-radius:20px;cursor:pointer;}
.keypad button{width:70px;margin:4px;}
.menu{display:none;}
.history{max-height:110px;overflow:auto;background:#000;padding:10px;border-radius:10px;margin-top:10px;font-size:13px;}
.receipt{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#000;padding:20px;border-radius:15px;box-shadow:0 0 20px #00ffff;width:270px;font-size:13px;}
.cash{height:10px;background:#00ffff;margin-top:5px;}
</style>
</head>

<body>

<div class="atm">

<div class="card"></div>

<h3>ATM Login</h3>
<input type="password" id="pin" maxlength="4" placeholder="Enter 4 digit PIN">

<div class="keypad">
<button onclick="press(1)">1</button>
<button onclick="press(2)">2</button>
<button onclick="press(3)">3</button><br>
<button onclick="press(4)">4</button>
<button onclick="press(5)">5</button>
<button onclick="press(6)">6</button><br>
<button onclick="press(7)">7</button>
<button onclick="press(8)">8</button>
<button onclick="press(9)">9</button><br>
<button onclick="clearPin()">C</button>
<button onclick="press(0)">0</button>
<button onclick="login()">OK</button>
</div>

<div class="menu" id="menu">
<h3>ATM Menu</h3>
<p id="balance">Balance: ₹10000</p>
<p>ATM Cash Left</p>
<div class="cash" id="cashbar"></div>

<button onclick="withdraw()">Withdraw</button>
<button onclick="deposit()">Deposit</button>
<button onclick="transfer()">Transfer</button>
<button onclick="changePin()">Change PIN</button>
<button onclick="showReceipt()">Receipt</button>
<button onclick="logout()">Logout</button>
<button onclick="closeATM()">Close</button>

<div class="history" id="history"></div>
</div>

<div class="receipt" id="receipt">
<h3>ATM Receipt</h3>
<div id="receiptData"></div>
<button onclick="closeReceipt()">Close</button>
</div>

</div>

<script>
let bal=10000;
let atmCash=20000;
let history=[];
let tries=0;
let dailyLimit=5000;
let todayWithdraw=0;

function time(){return new Date().toLocaleTimeString();}

// ⭐ keyboard support
document.addEventListener("keydown",function(e){
if(!isNaN(e.key) && document.getElementById("pin").value.length<4){
document.getElementById("pin").value+=e.key;
}
if(e.key==="Backspace") clearPin();
if(e.key==="Enter") login();
});

function press(num){
if(document.getElementById("pin").value.length<4){
document.getElementById("pin").value+=num;
}
}

function clearPin(){document.getElementById("pin").value="";}

// ⭐ any 4 digit PIN login
function login(){
let entered=document.getElementById("pin").value;
if(entered.length==4){
document.getElementById("menu").style.display="block";
tries=0;
updateCash();
}else{
tries++;
alert("Enter 4 digit PIN");
if(tries>=3) alert("Card Blocked!");
}
}

function withdraw(){
let amt=parseInt(prompt("Enter withdraw amount"));
if(amt>0 && bal>=amt && atmCash>=amt && todayWithdraw+amt<=dailyLimit){
bal-=amt;
atmCash-=amt;
todayWithdraw+=amt;
history.push("Withdraw ₹"+amt+" ("+time()+")");
update();
updateCash();
}else alert("Limit / ATM cash / balance issue");
}

function deposit(){
let amt=parseInt(prompt("Enter deposit amount"));
if(amt>0){
bal+=amt;
atmCash+=amt;
history.push("Deposit ₹"+amt+" ("+time()+")");
update();
updateCash();
}else alert("Invalid amount");
}

function transfer(){
let amt=parseInt(prompt("Enter transfer amount"));
if(amt>0 && bal>=amt){
bal-=amt;
history.push("Transfer ₹"+amt+" ("+time()+")");
update();
}else alert("Invalid amount");
}

function changePin(){
alert("PIN change disabled (any 4 digit allowed)");
}

function update(){
document.getElementById("balance").innerText="Balance: ₹"+bal;
document.getElementById("history").innerHTML=history.join("<br>");
}

function updateCash(){
document.getElementById("cashbar").style.width=(atmCash/20000*100)+"%";
}

function showReceipt(){
document.getElementById("receipt").style.display="block";
let data="<b>Balance: ₹"+bal+"</b><br><br>";
data+=history.length?history.join("<br>"):"No Transactions";
document.getElementById("receiptData").innerHTML=data;
}

function closeReceipt(){document.getElementById("receipt").style.display="none";}
function logout(){document.getElementById("menu").style.display="none";document.getElementById("pin").value="";}
function closeATM(){window.history.back();}
</script>

</body>
</html>